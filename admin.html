<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Admin Panel</title>
<style>
 body { font-family: sans-serif; background: #111; color: #fff; padding: 20px; }
 button { padding: 8px 12px; margin: 5px; border-radius: 6px; cursor:pointer; }
 .msg { background:#222; padding:12px; margin-bottom:10px; border-radius:8px; }
</style>
</head>

<body>
<h2>Admin Panel</h2>
<div id="messages"></div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyCBGxr3JcK_BAZH0UnM9m0aAxIaE3WtfjA",
  authDomain: "public-chat-d51a6.firebaseapp.com",
  databaseURL: "https://public-chat-d51a6-default-rtdb.firebaseio.com",
  projectId: "public-chat-d51a6",
  storageBucket: "public-chat-d51a6.firebasestorage.app",
  messagingSenderId: "608024937712",
  appId: "1:608024937712:web:265b2e561a79a346d72e35"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

db.ref("messages").limitToLast(200).on("child_added", snap => {
  const msg = snap.val();
  const id = snap.key;

  const el = document.createElement("div");
  el.className = "msg";
  el.innerHTML = `
    <b>${msg.name}</b><br>
    ${msg.text}<br><br>
    <button onclick="delMsg('${id}')">Delete</button>
    <button onclick="banUser('${msg.userId}')">Ban User</button>
  `;
  document.getElementById("messages").appendChild(el);
});

function delMsg(id){
  db.ref("messages/"+id).remove();
}

function banUser(uid){
  db.ref("banned/"+uid).set(true);
  alert("User banned.");
}
</script>
</body>
</html>
